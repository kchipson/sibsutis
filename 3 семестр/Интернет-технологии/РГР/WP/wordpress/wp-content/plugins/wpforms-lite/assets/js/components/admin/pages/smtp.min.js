"use strict";var WPFormsPagesSMTP=window.WPFormsPagesSMTP||function(t,l,i){var o={},p={init:function(){i(t).ready(p.ready)},ready:function(){p.initVars(),p.events()},initVars:function(){o={$stepInstall:i("section.step-install"),$stepInstallNum:i("section.step-install .num img"),$stepSetup:i("section.step-setup"),$stepSetupNum:i("section.step-setup .num img")}},events:function(){o.$stepInstall.on("click","button",p.stepInstallClick),o.$stepSetup.on("click","button",p.gotoURL)},stepInstallClick:function(){var n=i(this),s=n.attr("data-action"),t=n.attr("data-plugin"),a="";if(!n.hasClass("disabled")){switch(s){case"activate":a="wpforms_activate_addon",n.text(wpforms_pluginlanding.activating);break;case"install":a="wpforms_install_addon",n.text(wpforms_pluginlanding.installing);break;case"goto-url":return void(l.location.href=n.attr("data-url"));default:return}n.addClass("disabled"),p.showSpinner(o.$stepInstallNum);var e={action:a,nonce:wpforms_admin.nonce,plugin:t,type:"plugin"};i.post(wpforms_admin.ajax_url,e).done(function(t){p.stepInstallDone(t,n,s)}).always(function(){p.hideSpinner(o.$stepInstallNum)})}},stepInstallDone:function(t,n,s){if(t.success)o.$stepInstallNum.attr("src",o.$stepInstallNum.attr("src").replace("step-1.","step-complete.")),n.addClass("grey").text(wpforms_pluginlanding.activated),p.stepInstallPluginStatus();else{var a="install"===s?wpforms_pluginlanding.manual_install_url:wpforms_pluginlanding.manual_activate_url,e="install"===s?wpforms_pluginlanding.error_could_not_install:wpforms_pluginlanding.error_could_not_activate,l="install"===s?wpforms_pluginlanding.download_now:wpforms_pluginlanding.plugins_page;n.removeClass("grey disabled").text(l).attr("data-action","goto-url").attr("data-url",a),n.after('<p class="error">'+e+"</p>")}},stepInstallPluginStatus:function(){var t={action:"wpforms_smtp_page_check_plugin_status",nonce:wpforms_admin.nonce};i.post(wpforms_admin.ajax_url,t).done(p.stepInstallPluginStatusDone)},stepInstallPluginStatusDone:function(t){t.success&&(o.$stepSetup.removeClass("grey"),o.$stepSetupBtn=o.$stepSetup.find("button"),o.$stepSetupBtn.removeClass("grey disabled"),0<t.data.setup_status&&(o.$stepSetupNum.attr("src",o.$stepSetupNum.attr("src").replace("step-2.svg","step-complete.svg")),o.$stepSetupBtn.text(wpforms_pluginlanding.smtp_settings_button)))},gotoURL:function(){var t=i(this);t.hasClass("disabled")||(l.location.href=t.attr("data-url"))},showSpinner:function(t){t.siblings(".loader").removeClass("hidden")},hideSpinner:function(t){t.siblings(".loader").addClass("hidden")}};return p}(document,window,jQuery);WPFormsPagesSMTP.init();