"use strict";if(void 0===WPFormsChallenge)var WPFormsChallenge={};WPFormsChallenge.embed=window.WPFormsChallenge.embed||function(e,o,n){var t={init:function(){n(e).ready(t.ready),n(o).load(t.load)},ready:function(){t.setup(),t.events()},load:function(){"undefined"!=typeof tinymce&&null!==tinymce.activeEditor&&(tinymce.dom.Event.bind(tinymce.activeEditor.getWin(),"blur",function(){WPFormsChallenge.core.timer.pause()}),tinymce.dom.Event.bind(tinymce.activeEditor.getWin(),"focus",function(){WPFormsChallenge.core.timer.resume()})),WPFormsChallenge.core.isGutenberg()?WPFormsChallenge.core.initTooltips(5,".block-editor .components-notice-list",{side:"bottom"}):WPFormsChallenge.core.initTooltips(5,".wpforms-insert-form-button",{side:"right"}),WPFormsChallenge.core.updateTooltipUI()},setup:function(){5===WPFormsChallenge.core.loadStep()&&t.showPopup(),n(".wpforms-challenge").show()},events:function(){n(".wpforms-challenge-step5-done").click(function(){WPFormsChallenge.core.timer.pause(),WPFormsChallenge.core.stepCompleted(5),t.showPopup()}),n(".wpforms-challenge-popup-close").click(function(){t.completeChallenge()}),n(".wpforms-challenge-popup-rate-btn").click(function(){t.completeChallenge()}),n("#wpforms-challenge-contact-form").submit(function(e){e.preventDefault(),t.submitContactForm().done(t.completeChallenge)})},showPopup:function(){var e=WPFormsChallenge.core.timer.getSecondsLeft();if(n(".wpforms-challenge-popup-container").show(),0<e){var o=WPFormsChallenge.core.timer.getSecondsSpent(e);n("#wpforms-challenge-congrats-minutes").text(WPFormsChallenge.core.timer.getMinutesFormatted(o)),n("#wpforms-challenge-congrats-seconds").text(WPFormsChallenge.core.timer.getSecondsFormatted(o)),n("#wpforms-challenge-congrats-popup").show()}else n("#wpforms-challenge-contact-popup").show()},hidePopup:function(){n(".wpforms-challenge-popup-container").hide(),n(".wpforms-challenge-popup").hide()},completeChallenge:function(){var e={status:"completed",seconds_spent:WPFormsChallenge.core.timer.getSecondsSpent(),seconds_left:WPFormsChallenge.core.timer.getSecondsLeft()};t.hidePopup(),WPFormsChallenge.core.removeChallengeUI(),WPFormsChallenge.core.clearLocalStorage(),WPFormsChallenge.admin.saveChallengeOption(e).done(WPFormsChallenge.core.triggerPageSave)},submitContactForm:function(){var e=n("#wpforms-challenge-contact-form"),o={action:"wpforms_challenge_send_contact_form",_wpnonce:WPFormsChallenge.admin.l10n.nonce,contact_data:{message:e.find(".wpforms-challenge-contact-message").val(),contact_me:e.find(".wpforms-challenge-contact-permission").prop("checked")}};return n.post(ajaxurl,o,function(e){e.success||console.error("Error sending WPForms Challenge Contact Form.")})}};return t}(document,window,jQuery),WPFormsChallenge.embed.init();