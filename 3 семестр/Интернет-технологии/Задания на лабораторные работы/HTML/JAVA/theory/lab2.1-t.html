<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//RU">
<HTML>
<HEAD>
<TITLE>Теория к лаб. работе N 2.2</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=Windows-1251">
<link REL="stylesheet" TYPE="text/css" HREF="mstyle.css">
</HEAD>
<BODY>

<h2>Объектная модель языка JavaScript</h2>

<p>При создании HTML-документов и JavaScript-программ необходимо учитывать структуру объектов. 
Все объекты можно разделить на три группы:</p>
<OL>
  <LI>Объекты браузера</LI>
  <LI>Внутренние, или встроенные, объекты языка JavaScript</LI>
  <LI>Объекты, связанные с тегами языка HTML</LI>
</OL>
<p>Объектами браузера являются зависимые от браузера объекты: 
<B>window</B> (окно), <B>location</B> (местоположение), <B>history</B> (история) и т.д. </p>
<p>Внутренние объекты включают простые типы данных, такие как строки (<B>string</B>), математические константы (<B>math</B>), дата (<B>date</B>) и другие.</p>
<p>Объекты, связанные с тегами HTML, соответствуют тегам, которые формируют текущий документ. Они включают такие элементы как гиперсвязи и формы.</p>

<h3>Методы объектов</h3>
<p>С объектами связаны методы, которые позволяют управлять этими объектами, а также в некоторых случаях менять их содержимое. Кроме того в языке JavaScript имеется возможность создавать свои методы объектов. При использовании метода объекта, нужно перед именем метода указать имя объекта к которому он принадлежит. Например, правильным обращением к методу <strong>write</strong> объекта <B>document</B> является выражение <B>document.write()</B>, а просто выражение <B>write() </B>приведет к ошибке.</p>

<h3>Свойства объектов языка JavaScript</h3>
<p>В объектно-ориентированном программировании используется также термин <B><I>свойство</I></B>. Свойство - это именованное значение, которое принадлежит объекту. Все стандартные объекты языка JS имеют свойства. Для обращения к свойству необходимо указать имена объекта и свойства, разделив их точкой. Каждый объект имеет собственный набор свойств. Набор свойств нового объекта можно задать при определении объекта. Однако, некоторые свойства объктов существуют только для чтения, и вы не можете их менять. В таких случаях можно получить только значения этих свойств.  Как показывает практика, такие свойства изменять обычно без надобности и проблем в связи с этим не возникает.</p>

<p>Свойства объектов, связанных с тегами языка HTML, зачастую аналогичны атрибутам этих тегов. Так, для того чтобы изменить атрибут SRC тега IMG, можно использовать следующий код:</p>

<table><tr><td bgcolor=aqua><pre>
img_name.src = "new_image.gif";</pre></td></tr></table><br>

<h3>Объекты браузеров</h3>
<p>Браузеры поддерживают объекты различных типов. HTML-объектами являются объекты, которые соответствуют тегам языка HTML. К ним относятся метки, гиперсвязи и элементы формы - текстовые поля, кнопки, списки и др. Объекты верхнего уровня, или объекты браузера, - это объекты, поддерживаемые в среде браузера:  <B>window, location, history, document, navigator</B>. Объекты, перечисленные в таблице, создаются автоматически при загрузке документа в браузер.</p>
<center><TABLE BORDER="1">
  <TR>
   <TD><b><CENTER>Имя объекта</CENTER></B></TD>
   <TD><B><CENTER>Описание</CENTER></B></TD>
  </TR>
  <TR>
   <TD>window</TD>
   <TD>Объект верхнего уровня в иерархии объектов языка JavaScript. Фреймосодержащий документ также имеет объект window.</TD>
  </TR>
  <TR>
   <TD>document</TD>
   <TD>Содержит свойства, которые относятся к текущему HTML-документу, например имя каждой формы, цвета, используемые для отображения документа, и др. В языке JS большинству HTML-тегов соответствуют свойства объекта document.</TD>
  </TR>
  <TR>
   <TD>location</TD>
   <TD>Содержит свойства, описывающие местонахождение текущего документа, например адрес URL.</TD>
  </TR>
  <TR>
   <TD>navigator</TD>
   <TD>Содержит информацию о версии браузера. Свойства данного объекта обычно только для чтения. Например  свойство: navigator.appname содержит строковое значение имени браузера.</TD>
   </TR>
  <TR>
   <TD>history</TD>
   <TD>Содержит информацию обо всех ресурсах, к которым пользователь обращался во время текущего сеанса работы с браузером.</TD>  </TR>
</TABLE></center>

<p>Дадим краткий обзор объекту <strong>document</strong>.</p>

<h3>Объект document</h3>

<p>Объект <B>document </B>соответствует всему гипертекстовому документ, вернее, той его части, 
которая заключена в контейнер <B><I>&lt;body&gt; . . . &lt;/body&gt;</I></B>. 
Документы отображаются в окнах браузера, поэтому каждый из них связан с определенным окном.
Для обращения к свойствам и методам объекта document применяется следующий синтаксис:</p>

<table><tr><td bgcolor=aqua><pre>
document.propertyName
document.methodName (parameters);</pre></td></tr></table><br>

<p>Все HTML-объекты являются свойствами объекта <B>document</B>, поэтому они находятся в самом документе. 
Например, в языке JS к первой форме документа можно обратиться, используя выражение:</p>

<table><tr><td bgcolor=aqua><pre>
document.forms[0];</pre></td></tr></table><br>

<p>в то время как к первой форме во втором фрейме следует обращаться выражением:</p>

<table><tr><td bgcolor=aqua><pre>
parent.frames[1].document.forms[0];</pre></td></tr></table><br>

<p>Также, задание HTML тегу атрибута NAME:</p>

<table><tr><td bgcolor=aqua><pre>
&lt;img name="img_name" src="old_image.gif"&gt;</pre></td></tr></table><br>

<p>позволит обращаться к объекту напрямую по этому имени:</p>
<table><tr><td bgcolor=aqua><pre>
&lt;script language="JavaScript"&gt;
function set_image(image_url)
{
    document.img_name.src = image_url;
}
&lt;/script&gt;</pre></td></tr></table><br>

<p><strong>Примечание.</strong> Для того, чтобы вызвать JS функцию в нужный момент, можно использовать обработку события OnClick объекта формы button:</p>

<table><tr><td bgcolor=aqua><pre>
&lt;FORM name="form1"&gt;
    &lt;input type="button" value="Вызвать set_image" onClick="set_image('new_image.gif')">
&lt;/FORM&gt;</pre></td></tr></table><br>

Более детально обработка событий и использование форм в JS будут рассматриваться далее.


<h2>Модель событий JavaScript</h2>
<p>Использование языка JavaScript при обработке событий значительно расширило возможности языка HTML. 
Чаще всего программы создаются для обработки информации, вводимой пользователем в поля форм. 
Возможности управления элементами форм обеспечиваются главным образом за счет функций обработки событий, 
которые могут быть заданы для всех элементов формы.</p>
<p>Чтобы обеспечить перехват события, необходимо написать функцию-обработчик события. 
В качестве обработчиков событий могут быть задану целые функции языка JavaScript или 
только группы из одного или нескольких JS-операторов.</p>

<p>Самый привычный способ передачи события элементу - это объявление названия функции в теге элемента. 
Заметим, что нам нужно записать не просто "handler", а "handler()" для соответствия синтаксической конструкции JavaScript. 
В HTML документе это будет выглядеть так:</p>

<table><tr><td bgcolor=aqua><pre>
&lt;h2 onClick="handler()"&gt;
Текст, реагирующий на событие
&lt;/h2&gt;
...
&lt;script language="JavaScript"&gt;
function handler() 
{
    alert('Ты щелкнул Текст!');
}
&lt;/script&gt;</pre></td></tr></table><br>

<p>Естественно, тело функции handler() можно расположить и внутри тега HEAD.</p>
<p>Кроме того, можно подключить код обработки внутри тега элемента. При этом используется такая конструкция:</p>

<table><tr><td bgcolor=aqua><pre>
&lt;h2 language="JavaScript" onClick="alert('Ты щелкнул Текст!');"&gt;
Текст, реагирующий на событие
&lt;/h2&gt;</pre></td></tr></table><br>

<p>Как вы уже догадались, событие <strong>Click</strong> происходит при щелчке мышью на элементе формы или другом объекте.</p>

<h2>Функции setTimeout и clearTimeout</h2>
<h3>Метод setTimeout</h3>
<p>С помощью метода setTimeout вы можете установить таймер, указав при этом выражение JavaScript и задержку во времени:</p>

<table><tr><td bgcolor=aqua><pre>
idTimer=setTimeout(cmd, timeout);</pre></td></tr></table><br>

<p>Метод setTimeout создает и запускает таймер, возвращая его идентификатор. Когда пройдет время, заданное вторым параметром timeout (в миллисекундах), запускается выражение JavaScript, заданное параметром cmd.</p>
<p>Рассмотрим такой фрагмент сценария:</p>

<table><tr><td bgcolor=aqua><pre>
var cmd="NoAccess()";
idTimer=window.setTimeout(cmd, 10000);</pre></td></tr></table><br>

<p>Здесь мы создаем таймер с временем задержки 10 секунд. После прошествия этого времени будет вызвана функция с именем NoAccess, которая должна быть определена в сценарии заранее. Эта функция будет выполнена только один раз.</p>

<p>Одно из применений метода setTimeout - создание анимационных эффектов в сценарии JavaScript. Допустим, имеется набор картинок img_x.gif, где x - порядковый номер картинки. Для того, чтобы периодически менять изображение, создавая эффект анимации,
достаточно использовать следующий код:</p>

<table><tr><td bgcolor=aqua><pre>
&lt;img name="animation" src="img_1.gif" onLoad="setTimeout('animate()', delay)"&gt;</pre></td></tr></table><br>

<p>Новое для нас здесь - обработка события <strong>Load</strong>, происходящего после полной загрузки изображения.
Таким образом, после загрузки изображения с помощью setTimeout указывается, что по прошествии delay милисекунд должна
вызваться функция <strong>animate()</strong>. В этой функции достаточно изменить свойство <strong>src</strong> 
объекта-картинки <strong>animation</strong> для указания следующего изображения. Когда это изображение загрузится, 
опять произойдет событие <strong>Load</strong>, вновь установится таймер вызовом setTimeout и т.д.

<h3>Метод clearTimeout</h3>

<p>С помощью метода clearTimeout можно остановить таймер, запущенный только что рассмотренным методом setTimeout. В качестве параметра методу clearTimeout необходимо передать идентификатор таймера, полученный от метода setTimeout:</p>

<table><tr><td bgcolor=aqua><pre>
clearTimeout(idTimer);</pre></td></tr></table><br>

</body></html>